<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Djatoka OpenURL Image Example</title>
    <link rel="stylesheet" href="theme/default/style.css" type="text/css" />
    <link rel="stylesheet" href="style.css" type="text/css" />
    <script src="javascript/OpenLayers.js"></script>
    <script src="javascript/jquery-1.2.6.min.js"></script>
    <script type="text/javascript">
      function init(){
        //var url = "http://aalcdl26.lib.unc.edu:8080/adore-djatoka/resolver?url_ver=Z39.88-2004&rft_id=http://memory.loc.gov/gmd/gmd433/g4330/g4330/np000066.jp2&svc_id=info:lanl-repo/svc/getMetadata";
        var metadataUrl = "http://aalcdl26.lib.unc.edu:8080/adore-djatoka/resolver?url_ver=Z39.88-2004&rft_id=http://aalcdl26.lib.unc.edu:8080/adore-djatoka/images/126.jp2&svc_id=info:lanl-repo/svc/getMetadata";
        var mapWidth = 512;
        var mapHeight = 512;
        
        var OUlayer = new OpenLayers.Layer.OpenURL( "OpenURL",
          "http://aalcdl26.lib.unc.edu:8080/", {layername: 'basic', format:'image/jpeg', rft_id:'http://aalcdl26.lib.unc.edu:8080/adore-djatoka/images/126.jp2', metadataUrl: metadataUrl} );
        var metadata = OUlayer.getImageMetadata();
        var resolutions = OUlayer.getResolutions();        
        var maxExtent = new OpenLayers.Bounds(0, 0, metadata.width, metadata.height);
        var tileSize = OUlayer.getTileSize();
        var options = {resolutions: resolutions, maxExtent: maxExtent, tileSize: tileSize};
        var map = new OpenLayers.Map( 'map', options);
        map.addLayer(OUlayer);
        //map.addControl(new OpenLayers.Control.LayerSwitcher());
        var lon = metadata.width / 2;
        var lat = metadata.height / 2;
        map.setCenter(new OpenLayers.LonLat(lon, lat), 0);
      }

    </script>
  </head>
  <body onload="init()">
      <h1 id="title">OpenURL Image Layer Example</h1>

    <div id="tags"></div>

    <p id="shortdesc">
        Demonstrate the initialization and modification of a Djatoka OpenURL image layer.
    </p>

    <div id="map" class="smallmap"></div>
    <div id="data"></div>

  </body>
</html>
